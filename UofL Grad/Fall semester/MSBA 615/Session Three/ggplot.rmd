# Introduction to ggplot2 Basics

---



`ggplot2` is an R package that allows you to create elegant and complex plots from data in a consistent, easy-to-use way. It is based on the **Grammar of Graphics** framework, which provides a systematic approach to creating plots by combining different components like data, aesthetics, geometric objects, and more.

1. **What data am I plotting?** → `data = ...`
2. **Which variables map to visual properties (x, y, color, size)?** → `aes(...)`
3. **How should the plot represent those mappings visually?** → `geom_*()`

Standard flow:

```r
ggplot(data, aes(x, y)) + geom_...
```



---

## Key Components in ggplot2

A `ggplot2` figure is built by combining:

1. **Data (`data`)**
   The dataset used in the plot.

2. **Aesthetics (`aes`)**
   *Mapping* variables in the data to visual properties like x-position, y-position, color, size, or shape.

3. **Geometric objects (`geom_*`)**
   The actual drawing element: points, bars, lines, etc.

4. **Themes**
   Controls the overall visual style of the plot.

---

# aes(): Aesthetic Mappings

The `aes()` function tells ggplot *how* to map data to the plot’s visual dimensions.

Inside `aes()` you always use **variable names**, not fixed values.

### Example

```r
library(tidyverse)

ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point()
```

* `hp` is mapped to the x-axis
* `mpg` is mapped to the y-axis
* `geom_point()` draws points for each row in the dataset

This answers all three basic questions: data → mapping → drawing.

---

## Mapping vs. Setting 

### we start from simple 1D visuals, move to 2D, and then show why we need color/size/shape for 3D visualizations on a flat screen. We cannot show 3 axes on a 2D screen. When we want to visualize three variables, we can’t add another axis. So we use non-spatial visual channels:color,size,shape,transparency (alpha).These are extra aesthetic mappings handled inside aes().

## Mapping (inside aes): driven by data
```r
ggplot(mtcars, aes(x = hp, y = mpg, color = factor(cyl))) +
  geom_point()
```

* `color = factor(cyl)` assigns colors **based on a variable**
* ggplot automatically creates a **legend**
* Each group gets its own color because the color is data-driven

## Setting (outside aes): fixed styling

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point(color = "blue")
```

* All points become blue
* No legend appears
* The color is **not tied to any variable**

> **Rule**
>
> * Inside `aes()` → data-driven mapping
> * Outside `aes()` → fixed styling

---

# Global vs. Local aes()

You can define aesthetic mappings globally (in `ggplot()`) or locally (inside a specific `geom_*()`).

### Global Mapping

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point()
```

* All geoms added later inherit `x = hp` and `y = mpg`

### Adding a second geom using the same mapping

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  geom_smooth(method = "lm")
```

* Both layers use the same x/y mapping

### Local Mapping (only one layer)

```r
ggplot(mtcars) +
  geom_point(aes(x = hp, y = mpg))
```

Equivalent plot, but mapping is defined inside the geom instead of globally.

### Overriding Global Mapping

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  geom_smooth(aes(color = factor(cyl)), method = "lm")
```

* Smooth uses the global x/y
* Color is applied only to the smooth layer

---

# More geoms: How the data is drawn

`geom_*()` determines the *type* of plot.

Common geoms:

* `geom_point()` → scatterplot
* `geom_line()` → line plot
* `geom_bar()` → bar chart
* `geom_histogram()` → histogram
* `geom_smooth()` → trend / regression line

### Scatter Plot

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point()
```

### Adding a regression line

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  geom_smooth(method = "lm")
```

---

# Bar Plots and aes()

### Bar Plot with Counts

```r
ggplot(mtcars, aes(x = factor(cyl))) +
  geom_bar()
```

* `geom_bar()` automatically counts observations per category

### Adding a fill mapping

```r
ggplot(mtcars, aes(x = factor(cyl), fill = factor(cyl))) +
  geom_bar()
```

* Bars are filled by the cylinder category (mapping → inside aes)

### Fixed Fill Color

```r
ggplot(mtcars, aes(x = factor(cyl))) +
  geom_bar(fill = "skyblue")
```

* All bars have same color (setting → outside aes)

---

# Customizing Your Plot

### Titles and Labels

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  labs(
    title = "Horsepower vs MPG",
    x = "Horsepower (HP)",
    y = "Miles per Gallon"
  )
```

### Themes

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  theme_minimal()
```

---

# Faceting: Small Multiples

Faceting creates subplots for groups.

```r
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  facet_wrap(~ cyl)
```

This creates one scatter plot per cylinder type.

---



---


